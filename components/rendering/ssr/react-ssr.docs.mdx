---
description: A complete and extendable server-side rendering solution.
labels: ['react', 'serverside rendering', 'ssr']
---

Break down Server-side Rendering (SSR) into simple plugins.  

React version: `17.x.x`

## Simple usage

Out of the box, SSR is very simple:

```tsx
// client/main.js
import { React } from 'react';
import { BrowserRenderer } from '@teambit/react.rendering.ssr';

const renderer = new BrowserRenderer([]);
renderer.render(<MyApp />);
```

```tsx
// server/main.js
import { React } from 'react';
import { ServerRenderer } from '@teambit/react.rendering.ssr';

const renderer = new ServerRenderer([]);

// can be async
export default async function ServerSideApp({ response }) {
  const content = await renderer.render(<MyApp />);
  response.send(content);
}
```

and that's it! pretty simple.

### React Router Dom example

While rendering, you will have all the context you will need:

```tsx
// client/main.js
import { React } from 'react';
import { BrowserRenderer } from '@teambit/react.rendering.ssr';

const renderer = new BrowserRenderer([]);
renderer.render(
  <BrowserRouter>
    <MyApp />
  </BrowserRouter>
);
```

```tsx
// server/main.js
import { React } from 'react';
import { ServerRenderer } from '@teambit/react.rendering.ssr';

const renderer = new ServerRenderer([]);

export default async function ServerSideApp({ response, browser }) {
  const content = await renderer.render(
    <StaticRouter location={browser.location}>
      <MyApp />
    </StaticRouter>
  );
  response.send(content);
}
```

## Plugins

Instead of manually writing different code for server and client, you can write a single or double plugin that will manage the entire ssr lifecycle:

> This is the _unified_ plugin. You can also use the `ClientRenderPlugin` and `ServerRenderPlugin` separately.

```tsx
class UnifiedReactRouterPlugin implements RenderPlugin<{ location: PartialLocation }> {
  serverInit = ({ browser }: SsrSession) => ({ location: browser.location });
  // not needed in this case
  // clientInit = () => { return { location: window.location }}

  reactServerContext = ({ children, renderCtx }) => {
    return <StaticRouter location={renderCtx.location}>{children}</StaticRouter>;
  };

  // needed for serialization
  key: 'react-router-ssr-plugin';

  serialize = (ctx, app) => {
    // ... send data to the client
  };

  deserialize = (rawData) => {
    // ... parse stored data
  };

  reactClientContext = ({ children }) => {
    return <BrowserRouter>{children}</BrowserRouter>;
  };
}
```

You can then use the plugin like so:

```tsx
// client
const renderer = new BrowserRenderer([myPlugin]);

// server
const renderer = new ServerRenderer([myPlugin]);
```
